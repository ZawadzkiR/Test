from flask import Flask, render_template, request, redirect
import configparser

app = Flask(__name__)

# Funkcja do wczytywania konfiguracji z pliku config.ini
def load_config():
    config = configparser.ConfigParser()
    config.read('config.ini')
    return config

# Funkcja do zapisywania konfiguracji do pliku config.ini
def save_config(config):
    with open('config.ini', 'w') as configfile:
        config.write(configfile)

@app.route('/', methods=['GET', 'POST'])
def index():
    config = load_config()

    if request.method == 'POST':
        # Odczytanie danych z formularza
        new_path = request.form['sciezka_do_bazy']
        new_login = request.form['login']
        new_password = request.form['haslo']

        # Aktualizacja konfiguracji
        config['DEFAULT']['sciezka_do_bazy'] = new_path
        config['DEFAULT']['login'] = new_login
        if new_password:
            config['DEFAULT']['haslo'] = new_password

        # Zapisanie nowych ustawień do pliku
        save_config(config)

        return redirect('/')

    # Wczytywanie danych z config.ini
    sciezka_do_bazy = config['DEFAULT']['sciezka_do_bazy']
    login = config['DEFAULT']['login']

    return render_template('index.html', sciezka_do_bazy=sciezka_do_bazy, login=login)

if __name__ == '__main__':
    app.run(debug=True)



<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ustawienia</title>
</head>
<body>
    <h1>Ustawienia</h1>
    <form method="POST">
        <label for="sciezka_do_bazy">Ścieżka do bazy:</label>
        <input type="text" id="sciezka_do_bazy" name="sciezka_do_bazy" value="{{ sciezka_do_bazy }}"><br><br>
        
        <label for="login">Login:</label>
        <input type="text" id="login" name="login" value="{{ login }}"><br><br>

        <label for="haslo">Hasło:</label>
        <input type="password" id="haslo" name="haslo" placeholder="Nowe hasło"><br><br>

        <input type="submit" value="Zmień">
    </form>
</body>
</html>
